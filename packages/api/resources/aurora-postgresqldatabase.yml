DependsOn: SecurityGroup
Type: AWS::RDS::DBCluster
Properties:
  DatabaseName: scrpr_database
  DBClusterIdentifier: scrpr-cluster
  Engine: aurora-postgresql
  EngineMode: serverless
  MasterUsername: scrpr_user
  MasterUserPassword: ${file(resources/secrets.yml):DB_PASSWORD}
  ScalingConfiguration:
    AutoPause: true
    MaxCapacity: 2
    MinCapacity: 2
  VpcSecurityGroupIds:
    - Ref: SecurityGroup
  DBSubnetGroupName:
    Ref: DBSubnetGroup